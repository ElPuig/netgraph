<!--
Copyright 2025 David García De Mercado.

This file is part of Netgraph.

   Netgraph is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.

   Netgraph is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with Netgraph.  If not, see <https://www.gnu.org/licenses/>.
-->
<!doctype html>
<html lang="ca">
    <head>
        <meta charset="UTF-8" />
        <title>Generated by netgraph - {{ .Date }}</title>
        <script
            type="text/javascript"
            src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"
        ></script>
        <link rel="stylesheet" type="text/css" href="/css/styles.css" />
    </head>
    <body>
        <div id="network"></div>
        <script type="text/javascript">
            var nodes = new vis.DataSet({{ .Nodes }});
            var edges = new vis.DataSet({{ .Edges }});

            var container = document.getElementById("network");
            var data = { nodes: nodes, edges: edges };
            var options = {
                physics: {
                    enabled: true,
                    barnesHut: {
                        gravitationalConstant: -5000, // Fuerza de repulsión (más negativo = más repulsión)
                        centralGravity: 0.3, // Gravedad hacia el centro
                        springLength: 200, // Longitud de las aristas
                        springConstant: 0.04, // Constante del resorte
                        damping: 0.09, // Amortiguación
                        avoidOverlap: 0.1, // Evitar superposición
                    },
                    stabilization: {
                        enabled: true,
                        iterations: 1000, // Número de iteraciones para estabilizar
                        updateInterval: 100,
                        onlyDynamicEdges: false,
                        fit: true,
                    },
                },
                layout: {
                    hierarchical: {
                        enabled: false,
                        nodeSpacing: 300,
                        treeSpacing: 300,
                        sortMethod: "hubsize",
                    },
                },
            };
            var network = new vis.Network(container, data, options);
            network.on("selectNode", function (params) {
                if (params.nodes.length === 1) {
                    var node = nodes.get(params.nodes[0]);
                    window.open(node.url, "_blank");
                }
            });
        </script>
    </body>
</html>
